Software für die Windenelektronik
=================================

Anschlüsse auf der Platine
--------------------------

Vom Kühlkörper (links) nach rechts

Anschluss Strom
1. Schwarz/Rot -
2. Gelb-Lila +

Anschluss JTAG
1. Weiß TDI
2. Orange TDO
3. Grün TMS
4. Braun TCK

Anschlüsse von AVR mkII
-----------------------

Schwarz TCK
Weiß    GND
Grau    TDO
Lila    VTref
Blau    TMS
Grün    nSRST
Gelb    unbenutzt
Orange  unbenutzt
Rot     TDI
Braun   GND

1. Weiß GND -
2. Lila VTref +

1. Rot     TDI
2. Grau    TDO
3. Blau    TMS
4. Schwarz TCK

Anschlüsse von Paule AVR mkI
----------------------------

1. Schwarz/Rot -
2. Gelb-Lila +

1. Weiß TDI
2. Orange TDO
3. Grün TMS
4. Braun TCK

Serielle Schnittstelle
----------------------

minicom -D /dev/ttyUSB0 -b 19200

Deaktivieren der HW-Flusskontrolle in minicom nicht vergessen!

Konfiguration der Windensoftware
--------------------------------

Die Konfiguration der Windensoftware befindet sich in der Datei "config".

Statemachine-Diagramme
----------------------

Wenn graphviz installiert ist, kann mit "make" direkt aus der Konfiguration ein Flussdiagramm
des Mealy-Automaten erzeugt werden. Es wird die Datei "statemachine.pdf" erstellt.

Fehler in der aktuellen Installation
------------------------------------

TODO:
- Statemachine ausgabe hässlich
- Buzzer piept zu oft, Entprellung
- Latch zöflichkeit

Fehlerliste:
- Zündungsfreigabe funktioniert nicht
- Gangwarnung, Parkbremse sind nicht verschaltet
- Wenn Ausgang "Auszugsbremse" an, geht auch eingang "Schalter Auszugsbremse" an
- Und das bekannte Problem: Reboot beim Zünden
- WONTFIX Hardware-Flusskontrolle muss immer in der Software ausgeschaltet werden, vlt kann man rxready auf ready in version 2 setzen
- FIXED Motor aus (in4) ist nicht verschaltet, ich hatte das mit GeneratorAus verschaltet, allerdings hat dann die Zündungsbrücke nicht
mehr funktioniert. D.h. die Zündung auf der Windenseite war komplett wirkungslos, selbst bei Zündung aus ging das System an
